<!doctype html><html lang=zh-tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Andy Yao"><meta name=description content="本教學由 北科程式設計研究社 所屬 喜歡這篇教學，可以到我的 Github 上面給我一顆 Star [name=姚韋辰]
 本教程介紹如何使用 Python LINE Bot SDK 在 Heroku 上架設一個簡單的回話機器人。"><meta name=keywords content=",Line,Bot,Python,教學"><meta name=robots content="noodp"><meta name=theme-color content="#252627"><link rel=canonical href=https://blackmaple.me/line-bot-tutorial/><title>LineBot+Python，輕鬆建立聊天機器人 | BlackMaple's Blog</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=https://blackmaple.me/main.8af68487106e16c3f633bdd2fbcd0357e5d67e81a69c2f47318bde9bbe3554b4.css><link rel=apple-touch-icon sizes=180x180 href=https://blackmaple.me/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://blackmaple.me/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://blackmaple.me/favicon-16x16.png><link rel=manifest href=https://blackmaple.me/site.webmanifest><link rel=mask-icon href=https://blackmaple.me/safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=https://blackmaple.me/favicon.ico><meta name=msapplication-TileColor content="#252627"><meta name=theme-color content="#252627"><meta itemprop=name content="LineBot+Python，輕鬆建立聊天機器人"><meta itemprop=description content="本教學由 北科程式設計研究社 所屬
喜歡這篇教學，可以到我的 Github 上面給我一顆 Star
[name=姚韋辰]

本教程介紹如何使用 Python LINE Bot SDK 在 Heroku 上架設一個簡單的回話機器人。"><meta itemprop=datePublished content="2017-12-19T16:39:52+00:00"><meta itemprop=dateModified content="2017-12-19T16:39:52+00:00"><meta itemprop=wordCount content="542"><meta itemprop=image content="https://blackmaple.me/"><meta itemprop=keywords content="Line,Bot,Python,教學,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blackmaple.me/"><meta name=twitter:title content="LineBot+Python，輕鬆建立聊天機器人"><meta name=twitter:description content="本教學由 北科程式設計研究社 所屬
喜歡這篇教學，可以到我的 Github 上面給我一顆 Star
[name=姚韋辰]

本教程介紹如何使用 Python LINE Bot SDK 在 Heroku 上架設一個簡單的回話機器人。"><meta property="og:title" content="LineBot+Python，輕鬆建立聊天機器人"><meta property="og:description" content="本教學由 北科程式設計研究社 所屬
喜歡這篇教學，可以到我的 Github 上面給我一顆 Star
[name=姚韋辰]

本教程介紹如何使用 Python LINE Bot SDK 在 Heroku 上架設一個簡單的回話機器人。"><meta property="og:type" content="article"><meta property="og:url" content="https://blackmaple.me/line-bot-tutorial/"><meta property="og:image" content="https://blackmaple.me/"><meta property="article:published_time" content="2017-12-19T16:39:52+00:00"><meta property="article:modified_time" content="2017-12-19T16:39:52+00:00"><meta property="article:section" content="LineBot"><meta property="article:published_time" content="2017-12-19 16:39:52 +0000 UTC"></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=https://blackmaple.me/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ cd /home/</span>
<span class=logo__cursor style=background-color:#67a2c9></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=https://blackmaple.me/posts/>Posts</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41C32.4934 41 41 32.4934 41 22 41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>3分鐘</p></div><article><h1 class=post-title><a href=https://blackmaple.me/line-bot-tutorial/>LineBot+Python，輕鬆建立聊天機器人</a></h1><div class=post-content><blockquote><p>本教學由 <strong>北科程式設計研究社</strong> 所屬
喜歡這篇教學，可以到我的 <a href=https://github.com/yaoandy107/line-bot-tutorial>Github</a> 上面給我一顆 Star
[name=姚韋辰]</p></blockquote><p>本教程介紹如何使用 Python LINE Bot SDK 在 Heroku 上架設一個簡單的回話機器人。</p><p>如果您想以另一種語言架設範例 bot，請參閱以下 LINE Bot SDK repositories。</p><ul><li><a href=https://github.com/line/line-bot-sdk-php>PHP</a></li><li><a href=https://github.com/line/line-bot-sdk-go>Go</a></li><li><a href=https://github.com/line/line-bot-sdk-perl>Perl</a></li><li><a href=https://github.com/line/line-bot-sdk-ruby>Ruby</a></li><li><a href=https://github.com/line/line-bot-sdk-python>Python</a></li><li><a href=https://github.com/line/line-bot-sdk-nodejs>Node.js</a></li></ul><h2 id=在你開始之前>在你開始之前</h2><p>確保您具有以下內容：</p><ul><li>擁有 Line 帳號</li><li>擁有 <a href=https://www.heroku.com>Heroku</a> 帳戶（您可以免費創建一個）</li></ul><h2 id=建立-heroku-專案>建立 Heroku 專案</h2><ol><li><p>登入 Heroku 後，
在 <a href=https://dashboard.heroku.com/apps>Heroku</a> 頁面中，點選 New -> Create New App</p><p><img src=https://i.imgur.com/Y3njp7I.png alt></p></li><li><p>輸入自己喜歡的 App name ，然後點擊 Create app</p><p><img src=https://i.imgur.com/WJ85jXR.png alt></p></li></ol><h2 id=創建-line-bot-頻道>創建 Line Bot 頻道</h2><ol><li><p>進入 <a href=https://developers.line.me/console/>Line 控制台</a></p><p><img src=https://i.imgur.com/vseYQt1.png alt></p></li><li><p>創建提供者</p><p><img src=https://i.imgur.com/0tnYFBd.png alt></p></li><li><p>填入提供者名稱</p><p><img src=https://i.imgur.com/2ne3H1F.png alt></p></li><li><p>點擊 Create</p><p><img src=https://i.imgur.com/bdESW8G.png alt></p></li><li><p>點擊 Create Channel</p><p><img src=https://i.imgur.com/F1nAWhK.png alt></p></li><li><p>填入 Bot 資訊</p><p><img src=https://i.imgur.com/3wYFSvl.png alt></p></li><li><p>同意 Line 條款，並按 Create</p><p><img src=https://i.imgur.com/WNzl4sL.png alt></p></li><li><p>選擇剛剛創建的 Bot</p><p><img src=https://i.imgur.com/6ocsOBW.png alt></p></li></ol><h2 id=設定範例機器人>設定範例機器人</h2><p>按照以下步驟架設一個回話機器人。</p><ol><li><p>下載 <a href=https://github.com/yaoandy107/line-bot-tutorial/archive/master.zip>範例程式碼</a></p></li><li><p>進入 <a href=https://developers.line.me/console/>Line 控制台</a>，選擇你剛剛創建的機器人</p><p><img src=https://i.imgur.com/6ocsOBW.png alt></p></li><li><p>開啟 webhook</p><p><img src=https://i.imgur.com/nxvFPB1.png alt>
<img src=https://i.imgur.com/PzEKzdq.png alt></p></li><li><p>關閉預設罐頭回覆訊息</p><p><img src=https://i.imgur.com/nXPRhT4.png alt></p></li><li><p>產生 <strong>Channel access token</strong></p><p><img src=https://i.imgur.com/QyxnpZB.png alt>
<img src=https://i.imgur.com/quYbPx9.png alt></p></li><li><p>取得 <strong>Channel access token</strong></p><p><img src=https://i.imgur.com/C7OTect.png alt></p></li><li><p>取得 <strong>Channel secret</strong></p><p><img src=https://i.imgur.com/IwmvyzL.png alt></p></li><li><p>使用編輯器開啟範例程式碼資料夾內的 app.py，將剛剛取得的 <strong>channel secret</strong> 和 <strong>channel access token</strong> 填入</p><p><img src=https://i.imgur.com/Uz16joi.png alt></p></li></ol><h2 id=將程式推到-heroku-上>將程式推到 Heroku 上</h2><ol><li><p>下載並安裝 <a href=https://devcenter.heroku.com/articles/heroku-cli>Heroku CLI</a>、<a href=https://git-scm.com/>Git</a></p></li><li><p>開啟剛剛下載的範例程式碼資料夾，在路徑上輸入 cmd</p></li><li><p>使用終端或命令行應用程序登錄到 Heroku</p><pre><code class=language-shell＝ data-lang=shell＝>heroku login
</code></pre></li><li><p>初始化 git</p><pre><code class="language-shell=" data-lang="shell=">git config --global user.name &quot;你的名字&quot;
git config --global user.email 你的信箱
</code></pre><p>注意：<strong>你的名字</strong> 和 <strong>你的信箱</strong> 要換成各自的 <strong>名字</strong> 和 <strong>信箱</strong></p></li><li><p>初始化 git</p><pre><code class=language-shell＝ data-lang=shell＝>git init
</code></pre><p>注意：僅第一次使用時要輸入</p></li><li><p>用 git 將資料夾與 heroku 連接</p><pre><code class=language-shell＝ data-lang=shell＝>heroku git:remote -a {HEROKU_APP_NAME}
</code></pre><p>注意：{HEROKU_APP_NAME} 是 Heroku 應用的名稱</p></li><li><p>輸入以下指令，將程式碼推上 Heroku，<strong>如果有跳出錯誤請重新輸入</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git add .
git commit -m <span style=color:#e6db74>&#34;Add code&#34;</span>
git push -f heroku master
</code></pre></div><p><strong>每當需要更新 Bot 時，請重新輸入上述指令</strong></p></li></ol><h2 id=將-heroku-與-line-綁定>將 Heroku 與 Line 綁定</h2><ol><li><p>進入 <a href=https://developers.line.me/console/>Line 控制台</a>，選擇你剛剛創建的 Bot</p><p><img src=https://i.imgur.com/6ocsOBW.png alt></p></li><li><p>在 webhook URL 中輸入 Heroku 網址</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#f92672>{</span>HEROKU_APP_NAME<span style=color:#f92672>}</span>.herokuapp.com/callback
</code></pre></div><p><img src=https://i.imgur.com/EkDhAgb.png alt>
注意：{HEROKU_APP_NAME} 是 Heroku 應用的名稱</p></li></ol><h2 id=測試範例成果>測試範例成果</h2><ol><li><p>進入 <a href=https://developers.line.me/console/>Line 控制台</a>，選擇你剛剛創建的 Bot</p><p><img src=https://i.imgur.com/6ocsOBW.png alt></p></li><li><p>通過在控制台的 “Channel settings” 頁面上掃描 QR Code，將您的 Bot 添加到 LINE 的朋友中</p></li><li><p>在 Line 上向您的 Bot 發送文字訊息，並確認它會學你說話</p></li></ol><h2 id=錯誤尋找>錯誤尋找</h2><blockquote><p>當程式遇到問題時，可查看日誌以找出錯誤</p></blockquote><p>要查看您的 Bot 在 Heroku 的日誌，請按照以下步驟。</p><ol><li><p>如果沒登入，請先透過 Heroku CLI 登入</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>heroku login
</code></pre></div></li><li><p>顯示 app 日誌</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>heroku logs --tail --app <span style=color:#f92672>{</span>HEROKU_APP_NAME<span style=color:#f92672>}</span>
</code></pre></div><p>注意：{HEROKU_APP_NAME} 是上述步驟2中的應用名稱。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>--tail                     <span style=color:#75715e># 持續打印日誌</span>
--app <span style=color:#f92672>{</span>HEROKU_APP_NAME<span style=color:#f92672>}</span>    <span style=color:#75715e># 指定 App</span>
</code></pre></div></li></ol><h2 id=程式檔案解說>程式檔案解說</h2><blockquote><p>資料夾裡需含有兩份文件來讓你的程式能在 heroku 上運行</p></blockquote><ul><li>Procfile：heroku 執行命令，web: {語言} {檔案}，這邊語言為 python，要自動執行的檔案為 app.py，因此我們改成 <strong>web: python app.py</strong>。</li><li>requirements.txt：列出所有用到的套件，heroku 會依據這份文件來安裝需要套件</li></ul><h3 id=apppy-主程式>app.py (主程式)</h3><p>可透過修改程式裡的 handle_message() 方法內的程式碼來控制機器人的訊息回覆</p><p><img src=https://i.imgur.com/DNeNbpV.png alt></p><p>新版範例程式碼內附註解
如想更多了解此程式，可以去研究 Git、Python3、<a href=http://docs.jinkan.org/docs/flask/>Flask 套件</a>、<a href=https://github.com/line/line-bot-sdk-python>Line bot sdk</a></p><h2 id=進階操作>進階操作</h2><p><a href=https://github.com/line/line-bot-sdk-python#api>官方文件</a></p><h3 id=回覆訊息>回覆訊息</h3><p>只有當有訊息傳來，才能回覆訊息</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>line_bot_api<span style=color:#f92672>.</span>reply_message(reply_token, <span style=color:#960050;background-color:#1e0010>訊息物件</span>)
</code></pre></div><h3 id=主動傳送訊息>主動傳送訊息</h3><p>Bot 需要有開啟 push 功能才可以做，否則程式會出錯</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>line_bot_api<span style=color:#f92672>.</span>push_message(push_token, <span style=color:#960050;background-color:#1e0010>訊息物件</span>)
</code></pre></div><h2 id=訊息物件分類>訊息物件分類</h2><p><a href=https://developers.line.me/en/docs/messaging-api/message-types/>官方文件</a></p><p>修改範例程式碼中， handle_message() 方法內的程式碼，可實現多種功能</p><h3 id=textsendmessage-文字訊息>TextSendMessage （文字訊息）</h3><img src=https://i.imgur.com/LieCFAb.png alt=TextSendMessage class=left style=width:250px><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>message <span style=color:#f92672>=</span> TextSendMessage(text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Hello, world&#39;</span>)
line_bot_api<span style=color:#f92672>.</span>reply_message(event<span style=color:#f92672>.</span>reply_token, message)
</code></pre></div><h3 id=imagesendmessage圖片訊息>ImageSendMessage（圖片訊息）</h3><img src=https://i.imgur.com/RaH7gqo.png alt=ImageSendMessage class=left style=width:250px><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>message <span style=color:#f92672>=</span> ImageSendMessage(
    original_content_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://example.com/original.jpg&#39;</span>,
    preview_image_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://example.com/preview.jpg&#39;</span>
)
line_bot_api<span style=color:#f92672>.</span>reply_message(event<span style=color:#f92672>.</span>reply_token, message)
</code></pre></div><h3 id=videosendmessage影片訊息>VideoSendMessage（影片訊息）</h3><img src=https://i.imgur.com/o6cvf3o.png alt=VideoSendMessage class=left style=width:250px><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>message <span style=color:#f92672>=</span> VideoSendMessage(
    original_content_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://example.com/original.mp4&#39;</span>,
    preview_image_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://example.com/preview.jpg&#39;</span>
)
line_bot_api<span style=color:#f92672>.</span>reply_message(event<span style=color:#f92672>.</span>reply_token, message)
</code></pre></div><h3 id=audiosendmessage音訊訊息>AudioSendMessage（音訊訊息）</h3><img src=https://i.imgur.com/w5szZag.png alt=AudioSendMessage class=left style=width:250px><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>message <span style=color:#f92672>=</span> AudioSendMessage(
    original_content_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://example.com/original.m4a&#39;</span>,
    duration<span style=color:#f92672>=</span><span style=color:#ae81ff>240000</span>
)
line_bot_api<span style=color:#f92672>.</span>reply_message(event<span style=color:#f92672>.</span>reply_token, message)
</code></pre></div><h3 id=locationsendmessage位置訊息>LocationSendMessage（位置訊息）</h3><img src=https://i.imgur.com/tXE7Aus.png alt=LocationSendMessage class=left style=width:250px><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>message <span style=color:#f92672>=</span> LocationSendMessage(
    title<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;my location&#39;</span>,
    address<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Tokyo&#39;</span>,
    latitude<span style=color:#f92672>=</span><span style=color:#ae81ff>35.65910807942215</span>,
    longitude<span style=color:#f92672>=</span><span style=color:#ae81ff>139.70372892916203</span>
)
line_bot_api<span style=color:#f92672>.</span>reply_message(event<span style=color:#f92672>.</span>reply_token, message)
</code></pre></div><h3 id=stickersendmessage貼圖訊息>StickerSendMessage（貼圖訊息）</h3><img src=https://i.imgur.com/7x0mgK1.png alt=StickerSendMessage class=left style=width:250px><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>message <span style=color:#f92672>=</span> StickerSendMessage(
    package_id<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;1&#39;</span>,
    sticker_id<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;1&#39;</span>
)
line_bot_api<span style=color:#f92672>.</span>reply_message(event<span style=color:#f92672>.</span>reply_token, message)
</code></pre></div><h3 id=imagemapsendmessage-組圖訊息>ImagemapSendMessage （組圖訊息）</h3><img src=https://i.imgur.com/MoSf2D6.png alt=ImagemapSendMessage class=left style=width:250px><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>message <span style=color:#f92672>=</span> ImagemapSendMessage(
    base_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://example.com/base&#39;</span>,
    alt_text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;this is an imagemap&#39;</span>,
    base_size<span style=color:#f92672>=</span>BaseSize(height<span style=color:#f92672>=</span><span style=color:#ae81ff>1040</span>, width<span style=color:#f92672>=</span><span style=color:#ae81ff>1040</span>),
    actions<span style=color:#f92672>=</span>[
        URIImagemapAction(
            link_uri<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://example.com/&#39;</span>,
            area<span style=color:#f92672>=</span>ImagemapArea(
                x<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>, y<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>, width<span style=color:#f92672>=</span><span style=color:#ae81ff>520</span>, height<span style=color:#f92672>=</span><span style=color:#ae81ff>1040</span>
            )
        ),
        MessageImagemapAction(
            text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;hello&#39;</span>,
            area<span style=color:#f92672>=</span>ImagemapArea(
                x<span style=color:#f92672>=</span><span style=color:#ae81ff>520</span>, y<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>, width<span style=color:#f92672>=</span><span style=color:#ae81ff>520</span>, height<span style=color:#f92672>=</span><span style=color:#ae81ff>1040</span>
            )
        )
    ]
)
line_bot_api<span style=color:#f92672>.</span>reply_message(event<span style=color:#f92672>.</span>reply_token, message)
</code></pre></div><h3 id=templatesendmessage---buttonstemplate-按鈕介面訊息>TemplateSendMessage - ButtonsTemplate （按鈕介面訊息）</h3><img src=https://i.imgur.com/41lXWjP.png alt=ButtonsTemplate class=left style=width:250px><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>message <span style=color:#f92672>=</span> TemplateSendMessage(
    alt_text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Buttons template&#39;</span>,
    template<span style=color:#f92672>=</span>ButtonsTemplate(
        thumbnail_image_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://example.com/image.jpg&#39;</span>,
        title<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Menu&#39;</span>,
        text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Please select&#39;</span>,
        actions<span style=color:#f92672>=</span>[
            PostbackTemplateAction(
                label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;postback&#39;</span>,
                text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;postback text&#39;</span>,
                data<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;action=buy&amp;itemid=1&#39;</span>
            ),
            MessageTemplateAction(
                label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;message&#39;</span>,
                text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;message text&#39;</span>
            ),
            URITemplateAction(
                label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;uri&#39;</span>,
                uri<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;http://example.com/&#39;</span>
            )
        ]
    )
)
line_bot_api<span style=color:#f92672>.</span>reply_message(event<span style=color:#f92672>.</span>reply_token, message)
</code></pre></div><h3 id=templatesendmessage---confirmtemplate確認介面訊息>TemplateSendMessage - ConfirmTemplate（確認介面訊息）</h3><img src=https://i.imgur.com/U8NDhrt.png alt=ConfirmTemplate class=left style=width:250px><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>message <span style=color:#f92672>=</span> TemplateSendMessage(
    alt_text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Confirm template&#39;</span>,
    template<span style=color:#f92672>=</span>ConfirmTemplate(
        text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Are you sure?&#39;</span>,
        actions<span style=color:#f92672>=</span>[
            PostbackTemplateAction(
                label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;postback&#39;</span>,
                text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;postback text&#39;</span>,
                data<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;action=buy&amp;itemid=1&#39;</span>
            ),
            MessageTemplateAction(
                label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;message&#39;</span>,
                text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;message text&#39;</span>
            )
        ]
    )
)
line_bot_api<span style=color:#f92672>.</span>reply_message(event<span style=color:#f92672>.</span>reply_token, message)
</code></pre></div><h3 id=templatesendmessage---carouseltemplate>TemplateSendMessage - CarouselTemplate</h3><img src=https://i.imgur.com/982Glgo.png alt=CarouselTemplate class=left style=width:250px><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>message <span style=color:#f92672>=</span> TemplateSendMessage(
    alt_text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Carousel template&#39;</span>,
    template<span style=color:#f92672>=</span>CarouselTemplate(
        columns<span style=color:#f92672>=</span>[
            CarouselColumn(
                thumbnail_image_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://example.com/item1.jpg&#39;</span>,
                title<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;this is menu1&#39;</span>,
                text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;description1&#39;</span>,
                actions<span style=color:#f92672>=</span>[
                    PostbackTemplateAction(
                        label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;postback1&#39;</span>,
                        text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;postback text1&#39;</span>,
                        data<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;action=buy&amp;itemid=1&#39;</span>
                    ),
                    MessageTemplateAction(
                        label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;message1&#39;</span>,
                        text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;message text1&#39;</span>
                    ),
                    URITemplateAction(
                        label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;uri1&#39;</span>,
                        uri<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;http://example.com/1&#39;</span>
                    )
                ]
            ),
            CarouselColumn(
                thumbnail_image_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://example.com/item2.jpg&#39;</span>,
                title<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;this is menu2&#39;</span>,
                text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;description2&#39;</span>,
                actions<span style=color:#f92672>=</span>[
                    PostbackTemplateAction(
                        label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;postback2&#39;</span>,
                        text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;postback text2&#39;</span>,
                        data<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;action=buy&amp;itemid=2&#39;</span>
                    ),
                    MessageTemplateAction(
                        label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;message2&#39;</span>,
                        text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;message text2&#39;</span>
                    ),
                    URITemplateAction(
                        label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;uri2&#39;</span>,
                        uri<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;http://example.com/2&#39;</span>
                    )
                ]
            )
        ]
    )
)
line_bot_api<span style=color:#f92672>.</span>reply_message(event<span style=color:#f92672>.</span>reply_token, message)
</code></pre></div><h3 id=templatesendmessage---imagecarouseltemplate>TemplateSendMessage - ImageCarouselTemplate</h3><img src=https://i.imgur.com/2ys1qqc.png alt=ImageCarouselTemplate class=left style=width:250px><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>message <span style=color:#f92672>=</span> TemplateSendMessage(
    alt_text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ImageCarousel template&#39;</span>,
    template<span style=color:#f92672>=</span>ImageCarouselTemplate(
        columns<span style=color:#f92672>=</span>[
            ImageCarouselColumn(
                image_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://example.com/item1.jpg&#39;</span>,
                action<span style=color:#f92672>=</span>PostbackTemplateAction(
                    label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;postback1&#39;</span>,
                    text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;postback text1&#39;</span>,
                    data<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;action=buy&amp;itemid=1&#39;</span>
                )
            ),
            ImageCarouselColumn(
                image_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://example.com/item2.jpg&#39;</span>,
                action<span style=color:#f92672>=</span>PostbackTemplateAction(
                    label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;postback2&#39;</span>,
                    text<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;postback text2&#39;</span>,
                    data<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;action=buy&amp;itemid=2&#39;</span>
                )
            )
        ]
    )
)
line_bot_api<span style=color:#f92672>.</span>reply_message(event<span style=color:#f92672>.</span>reply_token, message)
</code></pre></div></div></article><iframe class=LikeCoin height=235 src="https://button.like.co/in/embed/yaoandy107/button?referrer=https%3a%2f%2fblackmaple.me%2fline-bot-tutorial%2f" width=100% frameborder=0></iframe><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://blackmaple.me/tags/line/>Line</a></span>
<span class=tag><a href=https://blackmaple.me/tags/bot/>Bot</a></span>
<span class=tag><a href=https://blackmaple.me/tags/python/>Python</a></span>
<span class=tag><a href=https://blackmaple.me/tags/%E6%95%99%E5%AD%B8/>教學</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg><span class=tag><a href=https://blackmaple.me/categories/linebot/>LineBot</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>542字</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2017-12-19 16:39</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read more</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://blackmaple.me/hexo-tutorial/><span class=button__icon>←</span>
<span class=button__text>Hexo+GitHub，新手也可以快速建立部落格</span></a></span></div></div><div id=comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"yaoandy107"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2020</span>
<span><a href=https://blackmaple.me/>Andy Yao</a></span>
<span><a href=https://blackmaple.me/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Made with &#10084; by <a href=https://github.com/rhazdon/hugo-theme-hello-friend-ng>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=https://blackmaple.me/bundle.min.dc716e9092c9820b77f96da294d0120aeeb189b5bcea9752309ebea27fd53bbe6b13cffb2aca8ecf32525647ceb7001f76091de4199ac5a3caa432c070247f5b.js integrity="sha512-3HFukJLJggt3+W2ilNASCu6xibW86pdSMJ6+on/VO75rE8/7KsqOzzJSVkfOtwAfdgkd5BmaxaPKpDLAcCR/Ww=="></script><script src=//instant.page/5.1.0 type=module integrity=sha384-by67kQnR+pyfy8yWP4kPO12fHKRLHZPfEsiSXR8u2IKcTdxD805MGUXBzVPnkLHw></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-111459214-2','auto');ga('send','pageview');}</script></body></html>